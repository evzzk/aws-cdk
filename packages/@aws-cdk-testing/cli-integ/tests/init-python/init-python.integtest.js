"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const lib_1 = require("../../lib");
['app', 'sample-app'].forEach(template => {
    (0, lib_1.integTest)(`init python ${template}`, (0, lib_1.withTemporaryDirectory)((0, lib_1.withPackages)(async (context) => {
        context.packages.assertJsiiPackagesAvailable();
        const shell = lib_1.ShellHelper.fromContext(context);
        await context.packages.makeCliAvailable();
        await shell.shell(['cdk', 'init', '-l', 'python', template]);
        const venvPath = path.resolve(context.integTestDir, '.venv');
        const venv = { PATH: `${venvPath}/bin:${process.env.PATH}`, VIRTUAL_ENV: venvPath };
        await shell.shell([`${venvPath}/bin/pip`, 'install', '-r', 'requirements.txt'], { modEnv: venv });
        await shell.shell([`${venvPath}/bin/pip`, 'install', '-r', 'requirements-dev.txt'], { modEnv: venv });
        await shell.shell([`${venvPath}/bin/pytest`], { modEnv: venv });
        await shell.shell(['cdk', 'synth'], { modEnv: venv });
    })));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdC1weXRob24uaW50ZWd0ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW5pdC1weXRob24uaW50ZWd0ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkJBQTZCO0FBQzdCLG1DQUF5RjtBQUV6RixDQUFDLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7SUFDdkMsSUFBQSxlQUFTLEVBQUMsZUFBZSxRQUFRLEVBQUUsRUFBRSxJQUFBLDRCQUFzQixFQUFDLElBQUEsa0JBQVksRUFBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUU7UUFDekYsT0FBTyxDQUFDLFFBQVEsQ0FBQywyQkFBMkIsRUFBRSxDQUFDO1FBRS9DLE1BQU0sS0FBSyxHQUFHLGlCQUFXLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9DLE1BQU0sT0FBTyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRTFDLE1BQU0sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUM3RCxNQUFNLElBQUksR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLFFBQVEsUUFBUSxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsQ0FBQztRQUVwRixNQUFNLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLFFBQVEsVUFBVSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2xHLE1BQU0sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsUUFBUSxVQUFVLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxzQkFBc0IsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDdEcsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxRQUFRLGFBQWEsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDaEUsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDeEQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgaW50ZWdUZXN0LCB3aXRoVGVtcG9yYXJ5RGlyZWN0b3J5LCBTaGVsbEhlbHBlciwgd2l0aFBhY2thZ2VzIH0gZnJvbSAnLi4vLi4vbGliJztcblxuWydhcHAnLCAnc2FtcGxlLWFwcCddLmZvckVhY2godGVtcGxhdGUgPT4ge1xuICBpbnRlZ1Rlc3QoYGluaXQgcHl0aG9uICR7dGVtcGxhdGV9YCwgd2l0aFRlbXBvcmFyeURpcmVjdG9yeSh3aXRoUGFja2FnZXMoYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgICBjb250ZXh0LnBhY2thZ2VzLmFzc2VydEpzaWlQYWNrYWdlc0F2YWlsYWJsZSgpO1xuXG4gICAgY29uc3Qgc2hlbGwgPSBTaGVsbEhlbHBlci5mcm9tQ29udGV4dChjb250ZXh0KTtcbiAgICBhd2FpdCBjb250ZXh0LnBhY2thZ2VzLm1ha2VDbGlBdmFpbGFibGUoKTtcblxuICAgIGF3YWl0IHNoZWxsLnNoZWxsKFsnY2RrJywgJ2luaXQnLCAnLWwnLCAncHl0aG9uJywgdGVtcGxhdGVdKTtcbiAgICBjb25zdCB2ZW52UGF0aCA9IHBhdGgucmVzb2x2ZShjb250ZXh0LmludGVnVGVzdERpciwgJy52ZW52Jyk7XG4gICAgY29uc3QgdmVudiA9IHsgUEFUSDogYCR7dmVudlBhdGh9L2Jpbjoke3Byb2Nlc3MuZW52LlBBVEh9YCwgVklSVFVBTF9FTlY6IHZlbnZQYXRoIH07XG5cbiAgICBhd2FpdCBzaGVsbC5zaGVsbChbYCR7dmVudlBhdGh9L2Jpbi9waXBgLCAnaW5zdGFsbCcsICctcicsICdyZXF1aXJlbWVudHMudHh0J10sIHsgbW9kRW52OiB2ZW52IH0pO1xuICAgIGF3YWl0IHNoZWxsLnNoZWxsKFtgJHt2ZW52UGF0aH0vYmluL3BpcGAsICdpbnN0YWxsJywgJy1yJywgJ3JlcXVpcmVtZW50cy1kZXYudHh0J10sIHsgbW9kRW52OiB2ZW52IH0pO1xuICAgIGF3YWl0IHNoZWxsLnNoZWxsKFtgJHt2ZW52UGF0aH0vYmluL3B5dGVzdGBdLCB7IG1vZEVudjogdmVudiB9KTtcbiAgICBhd2FpdCBzaGVsbC5zaGVsbChbJ2NkaycsICdzeW50aCddLCB7IG1vZEVudjogdmVudiB9KTtcbiAgfSkpKTtcbn0pO1xuIl19